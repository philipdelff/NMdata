<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Changelog • NMdata</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://nmautoverse.github.io/NMdata/reference/figures/apple-touch-icon-180x180.png"><meta property="og:image:alt" content="Efficient data preparation, consistency-checking and post-processing in PK/PD modeling"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-news">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">NMdata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.8.903</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>

  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="https://htmlpreview.github.io/?https://github.com/nmautoverse/NMdata/blob/master/vignettes/NMdata-cheat.html" class="external-link">Cheat Sheet</a>
    </li>
    <li>
      <a href="../articles/NMscanData.html">NMscanData: find and combine all output and input data</a>
    </li>
    <li>
      <a href="../articles/DataPrepare.html">Data Preparation Tools</a>
    </li>
    <li>
      <a href="../articles/NMdata-FAQ.html">FAQ</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/nmautoverse/NMdata/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/nmautoverse/NMdata/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small></small></h1>
      <small>Source: <a href="https://github.com/nmautoverse/NMdata/blob/master/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="page-header" data-toc-text="0.1.9" id="nmdata-019">NMdata 0.1.9<a class="anchor" aria-label="anchor" href="#nmdata-019"></a></h2>
<div class="section level3">
<h3 id="new-features-0-1-9">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-9"></a></h3>
<ul><li>
<code>NMwriteSection</code> gains two new options for the <code>location</code> argument: “first” and “last”.</li>
</ul></div>
<div class="section level3">
<h3 id="bugfixes-0-1-9">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-1-9"></a></h3>
<ul><li><p><code><a href="../reference/mat2dt.html">mat2dt()</a></code> was doing the opposite to what was specified by the <code>triangle</code> argument and returned the upper triangle when <code>triangle=lower</code> and vice versa.</p></li>
<li><p><code><a href="../reference/NMwriteSection.html">NMwriteSection()</a></code> would fail if the first section in a control stream was modified.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.1.8" id="nmdata-018">NMdata 0.1.8<small>2024-10-31</small><a class="anchor" aria-label="anchor" href="#nmdata-018"></a></h2>
<div class="section level3">
<h3 id="new-features-0-1-8">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-8"></a></h3>
<ul><li><p>If truncating/dropping columns in the csv file, <code><a href="../reference/NMwriteData.html">NMwriteData()</a></code> accepts data with commas in values, even when writing to csv files. The way <code><a href="../reference/NMwriteData.html">NMwriteData()</a></code> writes csv files, commas in character columns are a problem. But the <code>trunc.csv.as.nm=TRUE</code> argument means that columns not used by Nonmem (i.e. including most character columns) are not written to csv. Instead of rejecting these data sets right away, <code><a href="../reference/NMwriteData.html">NMwriteData()</a></code> will now only return an error ifcharacter variables with commas in values are attempted written to csv file.</p></li>
<li><p><code><a href="../reference/NMscanTables.html">NMscanTables()</a></code> includes model name in meta data table. Useful for generation of overviews of output tables from multiple models.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bugfixes-0-1-8">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-1-8"></a></h3>
<ul><li>Support for data file names including substrings “ACCEPT” and “IGN” is added. Before, such data set file names could lead to failure if interpreting data subsetting filters (ACCEPT and IGN(ORE)) in Nonmem control streams.</li>
</ul></div>
<div class="section level3">
<h3 id="other-improvements-0-1-8">Other improvements<a class="anchor" aria-label="anchor" href="#other-improvements-0-1-8"></a></h3>
<ul><li><p>NMscanMultiple would sometimes print a bit of a messy overview of the results. That has been fixed without implications on the results returned.</p></li>
<li><p>dt2mat() now returns actual matrix objects. This provides compatibility with the simpar package.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.1.7" id="nmdata-017">NMdata 0.1.7<small>2024-08-26</small><a class="anchor" aria-label="anchor" href="#nmdata-017"></a></h2>
<div class="section level3">
<h3 id="new-features-0-1-7">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-7"></a></h3>
<ul><li><p><code>NMreadPartab()</code> has been generalized to support comment formats very generally. <code>NMreadPartab()</code> reads the comments in <code>$THETA</code>, <code>$OMEGA</code> and <code>$SIGMA</code> sections, splits them into variables, and organizes those variables in a parameter table. With this upgrade, pretty much any structure should be supported as long as delimitors are not alphabetic or numeric (so any special characters should work). Notice, delimitors can change between fields . Example: <code>"$THETA 1.4 ; 3 - CL (Clearance) [L/h]"</code> would be matched by <code>NMreadPartab(...,format="%init ;%idx-%symbol(%label)[%unit]")</code> which would then return a table including columns init, idx, symbol, label, and unit. The comments must be systematic within say <code>$THETA</code> but the format can be different for <code>$OMEGA</code> and <code>$SIGMA</code>. See examples in <code>?NMreadParTab</code>.</p></li>
<li><p><code><a href="../reference/NMrelate.html">NMrelate()</a></code> is a new automated approach to label parameters. It interprets Nonmem code and provides labels used in the control stream. If the line <code>TVCL=THETA(1)</code> is the only line in the code that references THETA(1), <code><a href="../reference/NMrelate.html">NMrelate()</a></code> will return a label <code>TVCL</code>.</p></li>
<li><p>Improved support for character-coded <code>TIME</code> and <code>DATE</code> arguments. The default behavior is to allow (not require) <code>TIME</code> and <code>DATE</code> columns to be non-numeric. This is to support the Nonmem character format of DATE and TIME. It affects sorting of columns (<code>NMorderColumn()</code>) and the auto-generated <code>$INPUT</code> section suggestions. Where applicable, the <code>allow.char.TIME</code> argument controls this behavior. Set to <code>allow.char.TIME=FALSE</code> to require <code>TIME</code> and <code>DATE</code> columns be numeric. Thanks to Sanaya Shroff for the request, enabling <code>NMsim</code> to simulate using data sets with one or more of these columns coded as character.</p></li>
<li>
<p><code>mergeCheck(x,y)</code> has new options for handling common columns in data sets. The <code>common.cols</code> argument replaces <code>fun.commoncols</code> with added functionality.</p>
<ul><li><p><code>common.cols="merge.by"</code> to include them in by, even if they are not provided in the <code>by</code> argument.</p></li>
<li><p><code>common.cols="drop.x"</code> to drop the columns on the <code>x</code> and overwrite with columns in y</p></li>
<li><p><code>common.cols="drop.y"</code> to preserve in <code>x</code></p></li>
<li><p><code><a href="https://rdrr.io/r/base/stop.html" class="external-link">base::stop</a></code> The default value. Throw an error if common.columns are not included in merge <code>by</code> options.</p></li>
<li><p><code>common.cols=NULL</code> disabled handling and return columns as “.x” and “.y”.</p></li>
<li><p>Any function. <code>common.cols=warning</code> will issue a warning instead of throwing an error.</p></li>
</ul></li>
<li><p><code><a href="../reference/NMreadExt.html">NMreadExt()</a></code> separates objective function values into a separate list element. The <code>return</code> argument is used to control what data to retrieve. Use one of “pars” (default, parameter estimates), “iterations” (parameter estimates for each iteration), “obj” for objective funtion value, or “all” for a list with all of those.</p></li>
<li><p><code><a href="../reference/NMreadExt.html">NMreadExt()</a></code> adds block information to <code>OMEGA</code> and <code>SIGMA</code> elements based on off-diagonal values. <code>iblock</code> identifies which block the element is in. <code>blocksize</code> is the size of the block the element is in. Thank you Brian Reilly for contributing to this.</p></li>
<li><p><code><a href="../reference/NMreadExt.html">NMreadExt()</a></code> adds a <code>par.name</code> column which is provides consistent parameter naming. Instead of Nonmem’s <code>THETA1</code> which is found in the <code>parameter</code> column, the <code>par.name</code> column will contain <code>THETA(1)</code> consistent with the <code>OMEGA</code> and <code>SIGMA</code> naming like <code>OMEGA(1,1)</code></p></li>
<li><p><code><a href="../reference/NMreadExt.html">NMreadExt()</a></code> recognizes Laplacian estimation steps in addition to the already supported FO, FOCE(i), SAEM, and IMP.</p></li>
<li><p>A new option <code>nc</code> can be controlled with NMdataConf(). This is to serve <code>NMsim</code>. Please see <code><a href="https://NMautoverse.github.io/NMsim/reference/NMexec.html" class="external-link">NMsim::NMexec</a></code>. <code><a href="https://NMautoverse.github.io/NMsim/reference/NMsim.html" class="external-link">NMsim::NMsim()</a></code> does not adhere to this setting because it does not parallellize by default.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bugfixes-0-1-7">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-1-7"></a></h3>
<ul><li><p><code><a href="../reference/NMscanInput.html">NMscanInput()</a></code> and <code><a href="../reference/NMreadCsv.html">NMreadCsv()</a></code> could fail if file names had no extensions. Fixed.</p></li>
<li><p><code><a href="../reference/NMreplaceDataFile.html">NMreplaceDataFile()</a></code> now works on directories and regular expressions to find models to update.</p></li>
<li><p>Some internal functions would make some functions including <code><a href="../reference/NMscanData.html">NMscanData()</a></code> fail if used within <code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply()</a></code>. Fixed.</p></li>
<li><p><code><a href="../reference/NMexpandDoses.html">NMexpandDoses()</a></code> would give a warning if <code>length(cols.id)&gt;1</code>. Fixed.</p></li>
<li><p><code><a href="../reference/NMreadExt.html">NMreadExt()</a></code> would mess up iterations and parameter estimates if <code>as.fun</code> was set to returning something else than <code>data.table</code>s. Fixed.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.1.6" id="nmdata-016">NMdata 0.1.6<small>2024-04-23</small><a class="anchor" aria-label="anchor" href="#nmdata-016"></a></h2>
<div class="section level3">
<h3 id="new-features-0-1-6">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-6"></a></h3>
<ul><li><p>Function <code><a href="../reference/NMreadShk.html">NMreadShk()</a></code> to read and format <code>.shk</code> (shrinkage) files.</p></li>
<li><p>Functions <code><a href="../reference/mat2dt.html">mat2dt()</a></code> and <code><a href="../reference/dt2mat.html">dt2mat()</a></code> included to convert between matrices and <code>data.frame</code> format of matrix data - especially for symmetric matrices.</p></li>
<li><p>Function <code><a href="../reference/addOmegaCorr.html">addOmegaCorr()</a></code> adds estimated correlation between ETAs to parameter tables, as obtained using <code><a href="../reference/NMreadExt.html">NMreadExt()</a></code>.</p></li>
<li><p><code><a href="../reference/fnAppend.html">fnAppend()</a></code> can now handle multiple strings to append. Allows for more easily readable code.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bugfixes-0-1-6">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-1-6"></a></h3>
<ul><li><p><code>NMcheckData</code> now respects <code><a href="../reference/NMdataConf.html">NMdataConf()</a></code> setting of <code>col.time</code> and <code>col.id</code>. When using the <code>file</code> argument <code>col.id</code> was not respected at all. Fixed.</p></li>
<li><p><code>addTAPD</code> would get cumulative counting of number of doses and cumulative dose amount wrong in case of repeated dosing (using <code>ADDL</code> and <code>II</code>) followed by other doses. Fixed. Thanks to Simone Cassani for catching it.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.1.5" id="nmdata-015">NMdata 0.1.5<small>2024-02-21</small><a class="anchor" aria-label="anchor" href="#nmdata-015"></a></h2>
<div class="section level3">
<h3 id="new-features-0-1-5">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-5"></a></h3>
<ul><li><p><code>countFlags</code> no longer needs a table of flags. By default it will summarize the ones found in data. If additional flags wanted in summary table (with no findings), the flag table is still needed.</p></li>
<li><p>If a flag table is provided, <code>countFlags</code> will throw an error if the flags found in data are not covered by the provided flag table.</p></li>
<li><p><code>NMorderColumns</code> now includes arguments <code>col.id</code> and <code>col.time</code>. These can now also be controlled using <code><a href="../reference/NMdataConf.html">NMdataConf()</a></code>.</p></li>
<li><p><code>NMreadParText</code> includes argument <code>modelname</code>, <code>col.model</code>, and <code>as.fun</code> and defaults to what is defined in <code><a href="../reference/NMdataConf.html">NMdataConf()</a></code> like other <code>NMdata</code> functions. It also includes a <code>parameter</code> column for easier merge with data from e.g. <code>ext</code> files <code><a href="../reference/NMreadExt.html">NMreadExt()</a></code>.</p></li>
<li><p><code>NMreadParText</code> accepts function (with the control stream path as argument) to define how to read the parameter information. This is useful if one defines the tabulated information in a comment in the control stream. NMreadParText basically allows for a full automation of flexible parameter table generation.</p></li>
<li><p><code><a href="../reference/NMdataConf.html">NMdataConf()</a></code> is configured to handle <code>NMsim</code>’s <code>dir.sims</code> and <code>dir.res</code>.</p></li>
<li><p><code>NMdataConf(reset=TRUE)</code> wipes all settings. In recent versions, <code>NMdataConf</code> accepts the <code>allow.unknown</code> argument which means settings that are unknown to <code>NMdata</code> can be stored. This is relevant for other packages that want to make use of <code>NMdata</code>’s configuration system (<code>NMsim</code> is an example of a package that does so). Now <code>NMdataConf(reset=TRUE)</code> makes sure to wipe all such configuration if exists.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.1.4" id="nmdata-014">NMdata 0.1.4<small>2024-01-09</small><a class="anchor" aria-label="anchor" href="#nmdata-014"></a></h2>
<div class="section level3">
<h3 id="new-functions-0-1-4">New functions<a class="anchor" aria-label="anchor" href="#new-functions-0-1-4"></a></h3>
<ul><li><p><code><a href="../reference/NMreadParsText.html">NMreadParsText()</a></code> is a new function to extract comments to <code>$THETA</code>, <code>$OMEGA</code> and <code>$SIGMA</code> sections. As long as the comments are structured in a table-like manner, <code><a href="../reference/NMreadParsText.html">NMreadParsText()</a></code> should be able to fetch them almost no matter what delimiters you used. Use say <code>fields="%init;num)symbol/transform/label(unit)"</code> if you have lines like <code>(0,1) ; 1) CL / log / This is clearance (L/h)</code> All comment lines don’t have to be completed, and you can specify separate formats for <code>$THETA</code>, <code>$OMEGA</code> and <code>$SIGMA</code>. Together with <code><a href="../reference/NMreadExt.html">NMreadExt()</a></code> this is a very flexible basis for generating parameter tables.</p></li>
<li><p><code><a href="../reference/colLabels.html">colLabels()</a></code> is a simple wrapper of <code><a href="../reference/compareCols.html">compareCols()</a></code> that extracts the SAS column labels on data sets.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-1-4">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-4"></a></h3>
<ul><li><p>NMdata functions will now by default look for input control streams with file name extensions either <code>.mod</code> or <code>.ctl</code>. The user previously had to tell NMdata to look for <code>.ctl</code> using configuration options or function arguments but it will now work either way. An error will be thrown if both should be found.</p></li>
<li><p><code>NMreadExt</code> will by default only return parameters and iterations from the last table available. This can be controlled by the <code>tableno</code> argument.</p></li>
<li><p><code>fnAppend</code> will now throw an error in case the file name extension cannot be identified.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bugfixes-0-1-4">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-1-4"></a></h3>
<ul><li>
<code>NMreadText</code> would fail to disregard some comment lines when <code>keep.comments=FALSE</code>. Fixed.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.1.3" id="nmdata-013">NMdata 0.1.3<small>2023-11-11</small><a class="anchor" aria-label="anchor" href="#nmdata-013"></a></h2>
<ul><li><p>Better support for models with multiple estimation steps. Particularly reading output tables now better distinguishes between Nonmem table numbers and repetitions (like SUBPROBLEMS). Also, functions that read parameter estimates clearly separates Nonmem table numbers.</p></li>
<li><p>Improved support for reading multiple models with NMreadExt and NMreadPhi.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.1.2" id="nmdata-012">NMdata 0.1.2<small>2023-10-19</small><a class="anchor" aria-label="anchor" href="#nmdata-012"></a></h2>
<div class="section level3">
<h3 id="new-features-0-1-2">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-2"></a></h3>
<ul><li>NMreadExt is a new function that reads parameter estimates, uncertainties if available, estimation iterations and other information from .ext files.</li>
<li>NMreadPhi is a new function that reads contents of Nonmem phi files.</li>
<li>NMreadCov is a “new” function that reads Nonmem .cov files (parameter uncertainty as estimated by a covariance step). The function is not really new. It was developed by Matt Fidler for nonmem2rx based on NMdata’s NMreadTab. It has been only slightly modified since. Thanks Matt!</li>
<li>NMscanInput supports all combinations of <code>translate</code> and <code>recover.cols</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="other-improvements-0-1-2">Other improvements<a class="anchor" aria-label="anchor" href="#other-improvements-0-1-2"></a></h3>
<ul><li>NMreadCsv supports multiple prioritized formats in the <code>format</code> arguments.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.1.1" id="nmdata-011">NMdata 0.1.1<small>2023-09-07</small><a class="anchor" aria-label="anchor" href="#nmdata-011"></a></h2>
<div class="section level3">
<h3 id="new-features-0-1-1">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-1"></a></h3>
<ul><li>NMwriteSection can now handle functions to perform control stream editing. NMwriteSection provides methods to edit control streams. Until now by inserting, removing and replacing sections by user-provided text. This new feature allows the user to specify a function for editing the text, i.e. making it more suitable for doing changes to sections like <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mi>K</mi><mi>/</mi></mrow><annotation encoding="application/x-tex">PK/</annotation></semantics></math>PRED or <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mi>H</mi><mi>E</mi><mi>T</mi><mi>A</mi><mi>/</mi></mrow><annotation encoding="application/x-tex">THETA/</annotation></semantics></math>OMEGA/$SIGMA.</li>
<li>NMcheckData has a new argument <code>type.data</code> which allows switching between estimation and simulation type data.</li>
</ul></div>
<div class="section level3">
<h3 id="other-improvements-0-1-1">Other improvements<a class="anchor" aria-label="anchor" href="#other-improvements-0-1-1"></a></h3>
<ul><li>NMscanMultiple now by default looks for all .lst files if provided with a directory (<code>dir</code>) only.</li>
<li>Minor bugfix in compareCols in case input is an unnamed list</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.1.0" id="nmdata-010">NMdata 0.1.0<small>2023-07-07</small><a class="anchor" aria-label="anchor" href="#nmdata-010"></a></h2>
<div class="section level3">
<h3 id="new-features-0-1-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-0"></a></h3>
<ul><li><p>The super fast <code>fst</code> format is now supported. Data sets can be written to this format, and NMscanData() and related functions can read it. It can be used instead of <code>rds</code> which is the default full-featured data format used in the package.</p></li>
<li><p>New function NMreplaceDataFile to replace the input data file in a control stream. A simple wrapper of NMwriteSection but useful for this specific purpose.</p></li>
<li><p>New function editCharCols that allows for editing character columns in a dataset based on regular expressions or strings. This allows for instance for removal of special characters that are not allowed in the selected data format (like a comma can make trouble in a csv file).</p></li>
<li><p>NMcheckData has a new argument, <code>cols.dup</code>, to include additional columns (to col.id, col.cmt, col.evid, and col.time) in search for duplicated events. This is useful for different assays run on the same compartment (say a DVID column) or maybe stacked datasets. If col.cmt is of length&gt;1, this search is repeated for each cmt column. Thanks to Eric Anderson for suggesting and testing this.</p></li>
<li><p>NMcheckData has improved checks of II and ADDL columns.</p></li>
</ul></div>
<div class="section level3">
<h3 id="other-improvements-0-1-0">Other improvements<a class="anchor" aria-label="anchor" href="#other-improvements-0-1-0"></a></h3>
<ul><li><p><code>NMwriteData</code> now uses the <code>formats</code> argument to specify the requested file formats. This replaces arguments like <code>write.csv</code> and <code>write.rds</code>. To get those two, do <code>formats=c("csv","rds")</code> (which is default). The argument <code>save</code> is used to control whether outputs are written altogether.</p></li>
<li><p>Argument name format has been cleaned and aligned to follow the an.arg format rather than camel toe which was also used in some functions before. All deprecated arguments have been soft deprecated meaning they still work.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.16" id="nmdata-0016">NMdata 0.0.16<small>2023-03-26</small><a class="anchor" aria-label="anchor" href="#nmdata-0016"></a></h2>
<div class="section level3">
<h3 id="new-features-0-0-16">New features<a class="anchor" aria-label="anchor" href="#new-features-0-0-16"></a></h3>
<ul><li><p><code><a href="../reference/NMwriteSection.html">NMwriteSection()</a></code> includes argument <code>location</code>. In combination with <code>section</code>, this determines where the new section is inserter. Possible values are “replace” (default), “before”, “after”, “first”, “last”.</p></li>
<li><p><code><a href="../reference/NMreadSection.html">NMreadSection()</a></code> adds support for partial matching of section names. Specifically, this means that the first three characters will be matched only, i.e. allowing say <code>$SIMULATION</code> to match <code>$SIM</code> or <code>$ESTIMATION</code> to match <code>$EST</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bugfixes-0-0-16">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-0-16"></a></h3>
<p><code><a href="../reference/NMcheckData.html">NMcheckData()</a></code> did not check columns listed in cols.num for NA elements. Now it does.</p>
<p>NMcheckData now only checks <code>col.dv</code> to be non-NA for col.mdv==0 if col.mdv is present.</p>
<p><code><a href="../reference/NMscanInput.html">NMscanInput()</a></code> would fail if there was no column called <code>ID</code> in the dataset on file. This has been fixed to support cases where renaming or a pseudonym is being used to generate an <code>ID</code> column in <code>$INPUT</code>.</p>
</div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.15" id="nmdata-0015">NMdata 0.0.15<small>2022-12-01</small><a class="anchor" aria-label="anchor" href="#nmdata-0015"></a></h2>
<p>This update is of no difference to users. A technicality has been chaned to ensure consistent test results once data.table 1.14.7 is</p>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.14" id="nmdata-0014">NMdata 0.0.14<small>2022-11-16</small><a class="anchor" aria-label="anchor" href="#nmdata-0014"></a></h2>
<div class="section level3">
<h3 id="new-features-0-0-14">New features<a class="anchor" aria-label="anchor" href="#new-features-0-0-14"></a></h3>
<ul><li><p><code><a href="../reference/fnExtension.html">fnExtension()</a></code> has been generalized. It now ignores leading spaces in new extension, and extensions with zero or one leading period are treated identically (so asking for <code>xml</code> or <code>.xml</code> is the same). Also, by providing “” as the new extension will now remove the extension, and if extension is not provided, fnExtension will retrieve the extension rather than replace it.</p></li>
<li><p><code><a href="../reference/NMscanData.html">NMscanData()</a></code> now supports repeated output tables, like those created using the <code>SUBPROBLEM</code> option.</p></li>
<li><p><code><a href="../reference/NMwriteData.html">NMwriteData()</a></code> has a new argument csv.trunc.as.nm. If <code>TRUE</code>, csv file will be truncated horizontally (columns will be dropped) to match the <code>$INPUT</code> text generated for Nonmem (<code>genText</code> must be <code>TRUE</code> for this option to be allowed). This can be a great advantage when dealing with large datasets that can create problems in parallellization. Combined with <code>write.rds=TRUE</code>, the full data set will still be written to an rds file, so this can be used when combining output and input data when reading model results. This is done by default by <code><a href="../reference/NMscanData.html">NMscanData()</a></code>. This means writing a lean (narrow) csv file for Nonmem while keeping columns of non-numeric class like character and factor for post-processing.</p></li>
<li><p><code><a href="../reference/NMwriteData.html">NMwriteData()</a></code> has got an arguement ‘genText’ to control whether text for Nonmem should be generated. Default is to do so. Also, support is added for <code>script=NULL</code> which now means the same as not specifying script.</p></li>
<li><p><code><a href="../reference/addTAPD.html">addTAPD()</a></code> now includes <code>SDOS</code>, a scalar to be applied when computing last dose amount and cumulative dose amount from <code>AMT</code>. Sometimes, <code>AMT</code> is in one unit, and other variables related to doses is in another. Say that dose is in mg and concentrations are in ng/mL, then <code>AMT</code> should be in mcg. But you may want everything else related to doses to be in mg. Then use <code>SDOS=1000</code>.</p></li>
<li><p><code><a href="../reference/addTAPD.html">addTAPD()</a></code> includes convenient prefix.cols and suffix.cols arguments that will prepend or append strings to all created columns. This is useful if dosing more than one drug, and you want to run <code><a href="../reference/addTAPD.html">addTAPD()</a></code> for both (different suffixes?), or if you want to run for nominal and actual time (prefix A and N?).</p></li>
<li><p><code><a href="../reference/flagsAssign.html">flagsAssign()</a></code> now reports that data is empty and return the data if nothing is left after applying subset. It used to return an error.</p></li>
<li><p><code><a href="../reference/NMgenText.html">NMgenText()</a></code> has a new argument, width, passed to strwrap to control the width of the $INPUT text for Nonmem.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bugfixes-0-0-14">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-0-14"></a></h3>
<ul><li><p>NMapplyFilters (and then NMscanInput and NMscanData) gave an error when multiple filters were applied on the same column. Fixed.</p></li>
<li><p><code><a href="../reference/addTAPD.html">addTAPD()</a></code> was not respecting subset.dos for all generated columns.</p></li>
<li><p><code><a href="../reference/NMisNumeric.html">NMisNumeric()</a></code> would interpret a NA of class character or logical as non-numeric. Fixed.</p></li>
</ul></div>
<div class="section level3">
<h3 id="other-improvements-0-0-14">Other improvements<a class="anchor" aria-label="anchor" href="#other-improvements-0-0-14"></a></h3>
<ul><li><p>Internally, combination of input and output data without a row identifier is simplified.</p></li>
<li><p>NMdata version added to welcome message.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.13" id="nmdata-0013">NMdata 0.0.13<small>2022-09-08</small><a class="anchor" aria-label="anchor" href="#nmdata-0013"></a></h2>
<div class="section level3">
<h3 id="new-functions-0-0-13">New functions<a class="anchor" aria-label="anchor" href="#new-functions-0-0-13"></a></h3>
<ul><li>
<code><a href="../reference/NMexpandDoses.html">NMexpandDoses()</a></code> - Transform repeated dosing events (<code>ADDL</code>/<code>II</code>) to individual dosing events</li>
<li>
<code><a href="../reference/addTAPD.html">addTAPD()</a></code> - Add cumulative number of doses, time of last dose, previous dose amount, cumulative dose amount, and time since previous dose to data</li>
<li>
<code><a href="../reference/tmpcol.html">tmpcol()</a></code> provides column names not already used in data sets. tmpcol has long been part of NMdata but has not been exported until now.</li>
</ul></div>
<div class="section level3">
<h3 id="new-data-0-0-13">New data<a class="anchor" aria-label="anchor" href="#new-data-0-0-13"></a></h3>
<ul><li>A new data set called mad is included. It is based on the mad_missing_duplicates from the <code>xgxr</code> package. Doses are implemented using ADDL and II (so only one dosing row per subject). It is included for testing the new NMexpandDoses and addTAPD functions.</li>
</ul></div>
<div class="section level3">
<h3 id="bugfixes-0-0-13">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-0-13"></a></h3>
<ul><li>Non-critical bugfix in mergeCheck dimensions overview printed to console. One column too many was reported in input and result data. No implications on results from mergeCheck.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.12" id="nmdata-0012">NMdata 0.0.12<small>2022-06-06</small><a class="anchor" aria-label="anchor" href="#nmdata-0012"></a></h2>
<ul><li><p>Vignettes are no longer included in R package and can only be read online at <a href="https://philipdelff.github.io/NMdata/" class="external-link uri">https://philipdelff.github.io/NMdata/</a> They are still being maintained, and the exclusion from the package releases is only due to CRAN’s restrictive requirements to the package size.</p></li>
<li><p>New function, <code><a href="../reference/NMscanMultiple.html">NMscanMultiple()</a></code>, to read multiple models and stack results in one data set. This is very useful for meta analysis. <code><a href="../reference/NMscanMultiple.html">NMscanMultiple()</a></code> is a wrapper of <code><a href="../reference/NMscanData.html">NMscanData()</a></code>. It keeps track of warnings and errors for reading of individual models rather than getting stuck. You can either specify a vector of model paths or a directory plus a regular expression (just like for NMwriteSection).</p></li>
<li><p>Improved tests of order of age of output control streams and input data in NMscanData. So far, all data were tested on file modification times which is not useful in the common case that data files and/or nonmem control streams are moved around between systems. Now NMscanData can look for a time stamp in the output control stream and if NMwriteData was use to write the input data to file, the creation time is taken from meta data. This will make the warnings about the order of age of files more reliable. Notice however, that for the output control stream, the timezone has to be set using the tz.lst argument or using NMdataConf - at least for now.</p></li>
<li><p>Checks of unique subject identifier (<code>usubjid</code>) included in NMcheckData. This is mostly to detect the potential issue that the subject IDs generated for analysis are not unique across actual subjects. If a <code>usubjid</code> (e.g. from clinical data sets) is included in data, NMcheckData can check this for basic properties and check the analysis subject ID and the <code>usubjid</code> against each other.</p></li>
<li><p>New function: cl - creates factors, ordered by the appearance of the elements when created. cl(“b”,“a”) results in a factor with levels “b” and “a”. This can save quite some typing in data set preparation.</p></li>
<li><p>New function: fnAppend - append a string to a file name before the file name extension. fnAppend(“data.csv”,“subset”) results in “data_subset.csv”.</p></li>
<li><p>General support for a file.data argument when a specific input data file is to be used instead of finding this information in the control streams. This is very useful if you archive input data together with a nonmem run in a way that the path in the control stream has to be overruled. Like many other of this type of arguments in NMdata, it can be a function that systematically converts the path to the control stream to the input data archive. Running Nonmem this way breaks the link between an input dataset that may change over time and the model runs that become self-contained packages of input and output data.</p></li>
<li><p>Support for <code>NOHEADER</code> option in Nonmem <code>$TABLE</code> blocks. If <code>NMdata</code> is used to read the results, there is no need to use NOHEADER (which opens the door to mistakes if manually renaming the columns in results), but NMdata should now also be able to handle this.</p></li>
<li><p>If found in data, <code>CMT</code> is added to the breakdown of rows when summarizing results from NMscanData. Before, it was broken down on EVID only. Also, a total line is included with total number of rows in each of input-only, output, and result.</p></li>
<li><p>Support for non-event (say for <code>$PRED</code>) datasets in <code>NMcheckData</code>.</p></li>
<li><p>Support for custom column names for <code>DV</code> (<code>col.dv</code>) and MDV (col.mdv), ID (col.ID), AMT (col.amt) in NMcheckData.</p></li>
<li><p>Support for file.mod and dir.data arguments in NMcheckData when running on a control stream.</p></li>
<li><p><code>NMgenText</code> now has an argument called until that specifies the last column(s) to include in $INPUT.</p></li>
<li><p><code>compareCols</code> takes the list.data argument same way as dims() does. This is often easier to use in programming.</p></li>
<li><p>If <code>NMgenText</code> does not find any Nonmem-compatible columns to report, it now throws a warning and returns NULL.</p></li>
</ul><div class="section level3">
<h3 id="bugfixes-0-0-12">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-0-12"></a></h3>
<ul><li>NMextractDataFile was not cleaning all paths correctly. This mostly impacts <code>NMcheckData</code>’s ability to find data files when using the file argument in <code>NMcheckData</code>. Only affects certain models.</li>
<li>NMextractDataFile was not working with dir.data. Fixed.</li>
<li>NMextractDataFile Now handles absolute paths correctly.</li>
</ul></div>
<div class="section level3">
<h3 id="minor-changes-0-0-12">Minor changes<a class="anchor" aria-label="anchor" href="#minor-changes-0-0-12"></a></h3>
<ul><li><p>compareCols now by default lists the columns where no differences were found.</p></li>
<li><p><code>NMreadTab</code> throws a message instead of a warning in case duplicate column names are found and removed.</p></li>
<li><p><code>NMwriteData</code> now runs <code>NMgenText</code> in try, just in case.</p></li>
<li><p><code>fnExtension</code> now supports adding extensions to strings without extensions, i.e. <code>fnExtension("file",".txt")</code>.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.11" id="nmdata-0011">NMdata 0.0.11<small>2022-02-05</small><a class="anchor" aria-label="anchor" href="#nmdata-0011"></a></h2>
<ul><li>The cols.num argument in NMcheckData has been improved to support a list specifying columns that are numeric within subsets of data. This is often useful for columns that are only meaningful for say samples (eg LLOQ) or doses (eg injection site).</li>
<li>When run on a control stream, NMcheckData now checks all columns specified in the control stream to be numeric.</li>
<li>The NMcheckData argument, col.cmt now supports a vector of length&gt;1. This is helpful to support data where switching CMT column is used to switch between definitions for different compounds or even just models where compartment numbers are not compatible.</li>
<li>NMscanInput has the new argument recover.cols. Default is TRUE - use FALSE to not include columns that NONMEM did not read.</li>
<li>mergeCheck now retains column order from x. It has a few other improvements too, like checking for missing values in by columns.</li>
<li>listMissings is new function that looks for missing values or strings that represent missing values (like “” or “.”) in multiple columns. This can be useful when combining source data sets. However, the function is still underdevelopment and what exactly is being reported may change in future releases.</li>
</ul><div class="section level3">
<h3 id="bugfixes-0-0-11">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-0-11"></a></h3>
<ul><li>NMwriteData now respects NMdataConf()$args.fwrite</li>
<li>flagsCount was not respecting by columns. Fixed.</li>
<li>egdt was reporting one column too many in inputs (in terminal, not in results). Fixed.</li>
<li>Column names in control stream $INPUT statements weren’t adjusted for possible tabulator characters. Fixed.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.10" id="nmdata-0010">NMdata 0.0.10<small>2022-01-06</small><a class="anchor" aria-label="anchor" href="#nmdata-0010"></a></h2>
<div class="section level3">
<h3 id="new-functions-0-0-10">New functions<a class="anchor" aria-label="anchor" href="#new-functions-0-0-10"></a></h3>
<ul><li><p>NMcheckData is a new function that checks data for Nonmem compatibility in numerous ways. It returns a list of all findings making it easy to identify the location of each issue in the data. See the man page of NMcheckData for a complete list of the checks that are done. The function does not modify data in any way, and it is a very simple and easy step to avoid many problems in Nonmem. NMcheckData can check a data object in R, and it can also check how a control stream reads data and then do all the checks. The latter provides an extensive check of potential issues related to data and getting it into NONMEM. Great for both debugging and QC.</p></li>
<li><p>NMextractDataFile is a function that identifies the input datafile used by a Nonmem model. It reports the string as in the Nonmem control stream, file path and whether the file exists. It also looks for the corresponding rds files. The function is not new in NMdata but was not exported until 0.0.10.</p></li>
<li><p>cc is a function that creates character vectors from arguments without quotes. This is just to be able to skip typing quotes when listing say column names. So do cc(a,b,c) to get the exact same as c(“a”,“b”,“c”). You cannot do this with strings that contain special characters. In that case do cc(a,“b+c”) to get the same as c(“a”,“b+c”).</p></li>
</ul></div>
<div class="section level3">
<h3 id="function-improvements-0-0-10">Function improvements<a class="anchor" aria-label="anchor" href="#function-improvements-0-0-10"></a></h3>
<ul><li><p>NMwriteSection has been updated with a few very useful features. Namely these are related to updating multiple nonmem files at once. The user can now supply multiple paths, regular expressions for finding files (like pattern in list.files) and even input data files for nonmem models to match. This is very useful when updating many models after modifying input data. You can specify say all models in a directory names like pd<em>.mod where </em> is anything (in regular expressions this would be “pd.+\.mod”) and only the using the data file that was just written. Since NMwriteData generates the $INPUT for you, you just need to add one line to get the update of all your models automatically.</p></li>
<li><p>flagsAssign has got a few updates related to separate handling of different types of events. Often, this will be used to assign flags to observations, doses etc. separately. You can easily specify a subset of data to run flagsAssign on, and it will by default check for whether values of EVID are unique. This is similar to what flagsCount does.</p></li>
<li><p>NMgenText is a new function that provides the generation of $INPUT and $DATA. This used to be part of NMwriteData. NMwriteData still calls NMgenText but the separation of the two functionalities allows for more intuitive separate uses of one dataset for different models.</p></li>
<li><p>NMcompareCols now takes the argument “cols.wanted” which is a character vector of column names of special interest. Helpful when building a data set with specific column names in mind.</p></li>
<li><p>egdt now reports dimensions of the two data sets to combine and the resulting data. Can be disabled with quiet argument.</p></li>
<li><p>NMcheckColumns Change of column name from DATA to INPUT in order to match $INPUT in the control streams.</p></li>
<li><p>NMreadSection is now case insensitive in the section specification (i.e. “input” is the same as “INPUT”).</p></li>
</ul></div>
<div class="section level3">
<h3 id="bugfixes-0-0-10">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-0-10"></a></h3>
<ul><li><p>In NMwriteData the datafile is now correctly included in the $DATA suggestion for Nonmem. No impact on data file output.</p></li>
<li><p>Bugfix in NMscanData related to searching for candidates for unique row identifiers.</p></li>
<li><p>In compareCols multiple classes of single columns would give a warning and sometimes confusing overview of columns. Fixed.</p></li>
<li><p>findCovs fixed in ordering output when by argument is of length &gt; 1</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.9" id="nmdata-009">NMdata 0.0.9<small>2021-08-09</small><a class="anchor" aria-label="anchor" href="#nmdata-009"></a></h2>
<p>The only change from 0.0.8 is a patch provided by Matt Dowle ensuring that tests pass after the release of data.table v1.14.2.</p>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.8" id="nmdata-008">NMdata 0.0.8<small>2021-07-09</small><a class="anchor" aria-label="anchor" href="#nmdata-008"></a></h2>
<ul><li><p>Meta data system rewritten. NMinfo and NMstamp are used to read and write meta data. Meta data is stored as an attribute to the data object (attributes(data)$NMdata).</p></li>
<li><p>Translation table includes a column ranking the match between input data file contents and $INPUT. OK: names match, diff: names do not match, off: diff and name is found elsewhere.</p></li>
<li><p>NMscanInput, NMaplyFilters, NMtransInp all return meta data compatibly with NMinfo.</p></li>
<li><p>merge.by.row=“ifAvailable”</p></li>
<li><p>Check for new values of row identifier</p></li>
<li><p>Check for disjoint ID’s when ID-level output tables found</p></li>
<li><p>Improved message from NMscanData</p></li>
<li><p>Support for custom (and NULL) values of col.model and col.nmout</p></li>
<li><p>Support for Nonmem filters without operators (COL XX)</p></li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.7.2" id="nmdata-0072">NMdata 0.0.7.2<a class="anchor" aria-label="anchor" href="#nmdata-0072"></a></h2>
<p>NMreadCsv, NMscanInput, and NMscanData take argument args.fread. The contents of this list are passed as arguments to fread when reading csv files. This should only be needed in rare cases but offers full flexibility to match structure of csv files. Default contents of args.fread can be controlled using NMdataConf.</p>
<p>NMwriteData updated with more concise message.</p>
<p>NMreadSection now returns all sections if argument section is missing or equals NULL or “.”.</p>
<p>NMinfo is a new function that provides meta data, processed by as.fun.</p>
<p>If merge.by.row=TRUE, NMscanData now checks if col.row seems to be changed in the Nonmem code. If that is the case, an error is returned.</p>
<p>save argument added to flagsCount function to align with other functions.</p>
<p>NMwriteData now writes meta data to a txt file when writing csv file. NMreadCsv looks for this info and attaches it if found.</p>
<p>NMwriteData takes the argument args.fwrite - a list of arguments passed to fwrite. This is aligned with args.fread used by NMreadCsv. Defaults can be configured using NMdataConf.</p>
<p>Improved and shortened text to console from NMscanData (print.summary_NMdata).</p>
<p>mergeCheck will now throw an explained error if argument df1 has zero rows.</p>
<div class="section level3">
<h3 id="bugfixes-0-0-7-2">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-0-7-2"></a></h3>
<ul><li>In the special case where only one data set is given, compareCols used to sort the list of columns in an irrelevant way. Now no reordering is done but the list will match the column order in the data set.</li>
<li>In the NMdata summary, the number of columns from input data are now calculated correctly.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.7.1" id="nmdata-0071">NMdata 0.0.7.1<a class="anchor" aria-label="anchor" href="#nmdata-0071"></a></h2>
<p>compareCols generalized to the single data set case.</p>
<p>mergeCheck has improved warnings when checks fail. This should in most cases provide information for the user to get a good idea what needs to be resolved for the merge to work as expected.</p>
<p>Support for pseudonyms when translating input data column names based on nonmem control stream. Now by default, the column will be returned (doubled) with both pseudonyms as column names.</p>
<p>new function - fnExtension is a simple function to replace the extension of a file name (say from file.mod to file.lst)</p>
<p>new function - dims is a simple function that returns a table of the dimensions of multiple data sets. It is used by multiple other functions in the package and may be useful on its own. However, compareCols reports this information too (by calling dims).</p>
<p>NMscanData now has an argument, translate.input, which can be used to skip the translation of column names according to $DATA in the listing file. This can be necessary if input data has changed and hence $DATA is outdated since last model run.</p>
<p>flagsCount now reports cumulative counts of discards too.</p>
<div class="section level3">
<h3 id="bugfixes-0-0-7-1">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-0-7-1"></a></h3>
<ul><li>Correct ordering of rows in compareCols</li>
<li>flagsCount now reports numbers of discarded subjects as intended.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.7" id="nmdata-007">NMdata 0.0.7<a class="anchor" aria-label="anchor" href="#nmdata-007"></a></h2>
<p>This is a major upgrade from 0.0.6.6 featuring many improvements and bug fixes. Everyone is strongly encouraged to upgrade.</p>
<p>The choice between data combination methods in NMscanData is now done in one argument, called merge.by.row. Before the method was decided based on values of two arguments, cbind.by.filters and col.row. A default value for col.row can now be set using NMdataConf and will not affect the data combination method.</p>
<p>Other arguments which default values can now be modified using NMdataConf are: merge.by.row, col.flagn, col.flagc, use.input, recover.rows, col.model, modelname, file.mod, and check.time, quiet, use.rds.</p>
<p>The tools to assign and count exclusion flags, flagsAssign and flagsCount, have been improved. They now support working on a subset of data (say samples only), and the order (increasing/decreasing) of the exclusion flags is optional. The printing of the count of exclusion flags has been improved.</p>
<p>NMgetSection and NMwriteSection are new functions that can be used to extract sections from and write sections to Nonmem control streams. NMwriteData now returns a list of sections that can be passed directly to NMwriteSection, in order to update control streams to read the updated data file correctly.</p>
<p>compareCols is a very useful new data creation tool. See the difference between presence and classes of columns in data sets. This is useful before rbind’ing or merging - or maybe when those throw an error, and you want to figure out why.</p>
<p>renameByContents is a function that can rename columns which contents match a given criterion. In combination with the provided NMisNumeric, this can be used to rename (say to lowercase) columns that Nonmem cannot interpret (as numeric).</p>
<p>mergeCheck now informs about common column names that are not used to merge by. These will create new column names, and it’s often not intended. An argument has been added (ncols.expected) to check the number of columns added to df1 against expectation.</p>
<p>egdt is a new function for expanding grids of data.tables. This is quite technical, and it fills a whole when constructing data with data.tables. It mimics the behavior of merge.data.frame on objects with no common columns.</p>
<div class="section level3">
<h3 id="bugfixes-related-to-0-0-7">Bugfixes related to<a class="anchor" aria-label="anchor" href="#bugfixes-related-to-0-0-7"></a></h3>
<ul><li>Class of return from NMorderData.</li>
<li>NA values in NMisNumeric. This bug would spill over to NMOrderColumns.</li>
<li>Processing rds files including non-data.table objects.</li>
<li>Single-character data filters in Nonmem (say IGNORE=C)</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.6.6" id="nmdata-0066">NMdata 0.0.6.6<a class="anchor" aria-label="anchor" href="#nmdata-0066"></a></h2>
<p>Central configuration mechanism implemented. The configuration function to use is NMdataConf. You can configure several options, corresponding to default values of arguments to different functions in the package. This is very useful if you want to change the directory and file naming structure, or if you want to change default column names.</p>
<p>The exclusion flag functions flagsAssign and flagsCount have been generalized to use customizable column names for the numerical and character flags. The default can be configured using NMdataConf.</p>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.6.4" id="nmdata-0064">NMdata 0.0.6.4<a class="anchor" aria-label="anchor" href="#nmdata-0064"></a></h2>
<p>If all common column names two data objects to merge are not used for merging (by), new column names are created by merge. The behavior of mergeCheck can now be controlled in case this happens. This is especially useful when using mergeCheck in programming.</p>
<p>A shortcut to system.file(…,package=“NMdata”) has been removed. The function was called NMdata_filepath and is no longer available. Use system.file instead.</p>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.6.3" id="nmdata-0063">NMdata 0.0.6.3<a class="anchor" aria-label="anchor" href="#nmdata-0063"></a></h2>
<p>Meta information added about the input data.</p>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.6.2" id="nmdata-0062">NMdata 0.0.6.2<a class="anchor" aria-label="anchor" href="#nmdata-0062"></a></h2>
<p>A summary function is provided for NMdata objects. There is a print function for the summary too. This is printed automatically by NMdata unless quiet=TRUE.</p>
<p>A lot of meta information has been added in an attribute to NMdata objects. This will help the user to understand and automatically document what has been read.</p>
<p>The argument to NMscanData previously called name has been renamed to modelname and generalized to take a function that derives the name from the file path. Also an general option “NMdata.modelname” has been added, so the default behavior can be configured.</p>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.6.1" id="nmdata-0061">NMdata 0.0.6.1<a class="anchor" aria-label="anchor" href="#nmdata-0061"></a></h2>
<p>The default class to generate is now data.frame rather than data.table. If you want to work with data.tables, do options(NMdata.as.fun=“none”)</p>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.6" id="nmdata-006">NMdata 0.0.6<a class="anchor" aria-label="anchor" href="#nmdata-006"></a></h2>
<p>General support for conversion of output to user-specified class. Setting the option “NMdata.as.fun” to a conversion function such as as.data.frame or tibble::as_tibble it is possible for the user to work with their preferred data class. An argument, as.fun, can be used for the individual functions too.</p>
<p>The translation from the output control stream file path (.lst in PSN) and the input control stream (.mod in PSN) can now be configured through the option “NM.file.mod”. Typically, all the models to be considered in an analysis have been run on the same system, so it makes most sense to define this behavior once and for all for most users.</p>
<p>NMwriteData improved with checks of column names and automated generation of $INPUT and $DATA Nonmem sections.</p>
<p>NMorderColumns simplified, and documentation improved.</p>
<p>Documentation has been upgraded with a pkgdown site.</p>
<p>New vignette on data set creation tools in NMdata.</p>
<p>New FAQ vignette.</p>
<div class="section level3">
<h3 id="bugfixes-0-0-6">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-0-6"></a></h3>
<p>NMtransInput now supports the case where additional unused column names are given in $INPUT than actually found in $DATA. A warning will be given.</p>
</div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.5" id="nmdata-005">NMdata 0.0.5<a class="anchor" aria-label="anchor" href="#nmdata-005"></a></h2>
<p>This release introduces a consistent default NMscanData behavior that will work in most cases and provide the user with information on how to use a more robust approach to merging input and output data.</p>
<p>Naming of a few arguments to NMscanData has been changed from camelCase to lower.case for consistency.</p>
<p>NMscanTables keeps track of LASTONLY and FIRSTLASTONLY. LASTONLY are now treated like FIRSTONLY while FIRSTLASTONLY tables are disregarded (with a warning).</p>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.4" id="nmdata-004">NMdata 0.0.4<a class="anchor" aria-label="anchor" href="#nmdata-004"></a></h2>
<p>The most obvious change since 0.0.3 is that only one data.table is being returned from NMscanData. This is what used to be the <code>row</code> element in the returned objects previously. The main reason for this change is that it makes it easier for users to post-process only one dataset before splitting into different levels of variability. The small cost is that the user will have to run findCovs, or findVars to get the desired level of variability. These functions are however very simple to use and very fast to run.</p>
<p>This release features numerous improvements to especially the NMscanData function. The work is mainly focused around use without a row identifier. Even without a row identifier, NMscanData should now work for the vast majority of models, including merging with input and recovering rows.</p>
<p>An attribute called <code>vars</code> has been added to the NMdata objects coming out of NMscanData. It features a table of the columns in the returned object and information about where they originate from. More work is still to be done on this, but hopefully it is useful already.</p>
<p>NMwriteData: Added support for passing arguments to saveRDS.</p>
<p>Last but far from least is a new vignette on using NMscanData. Check it out with vignette(“NMscanData”).</p>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.2" id="nmdata-002">NMdata 0.0.2<a class="anchor" aria-label="anchor" href="#nmdata-002"></a></h2>
<p>This release contains bugfixes and experimental support for merging nonmem input and output data without a row identifier.</p>
<p>A clearer cut has been made between the pmxtricks package (version 0.0.10) and NMdata. The packages should not overlap in exported functionality, and they do not depend on each other.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Philip Delff.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>




  <script data-goatcounter="https://nmdata.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script></body></html>

